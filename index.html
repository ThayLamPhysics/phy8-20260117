<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vật Lý 8 - Phòng Lab Thầy Lâm</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts: Orbitron (Sci-fi) & Rajdhani (Tech) -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- MathJax Configuration -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            },
            loader: { load: ['input/tex', 'output/chtml'] },
            startup: {
                pageReady: () => {
                    return MathJax.startup.defaultPageReady();
                }
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

    <!-- Custom Styles & Animation Configuration -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        'cyber': ['"Orbitron"', 'sans-serif'],
                        'tech': ['"Rajdhani"', 'sans-serif'],
                    },
                    colors: {
                        'neon-blue': '#00f3ff',     /* Cyan điện */
                        'neon-purple': '#bc13fe',   /* Tím laser */
                        'neon-green': '#0aff00',    /* Xanh matrix */
                        'cyber-dark': '#0b1120',    /* Nền tối */
                        'cyber-panel': '#1e293b',   /* Nền panel */
                        'warning': '#ffb700',       /* Vàng cảnh báo */
                    },
                    boxShadow: {
                        'neon': '0 0 10px rgba(0, 243, 255, 0.5), 0 0 20px rgba(0, 243, 255, 0.3)',
                        'neon-purple': '0 0 10px rgba(188, 19, 254, 0.5), 0 0 20px rgba(188, 19, 254, 0.3)',
                        'hud': 'inset 0 0 20px rgba(0, 243, 255, 0.05)',
                    },
                    backgroundImage: {
                        'grid-pattern': "linear-gradient(to right, #1e293b 1px, transparent 1px), linear-gradient(to bottom, #1e293b 1px, transparent 1px)",
                    }
                }
            }
        }
    </script>

    <style>
        body {
            font-family: 'Rajdhani', sans-serif;
            background-color: #0b1120;
            background-image: 
                radial-gradient(circle at 50% 0%, #1e293b 0%, transparent 70%),
                linear-gradient(to right, rgba(30, 41, 59, 0.3) 1px, transparent 1px), 
                linear-gradient(to bottom, rgba(30, 41, 59, 0.3) 1px, transparent 1px);
            background-size: 100% 100%, 40px 40px, 40px 40px;
            color: #e2e8f0;
        }

        h1, h2, h3, h4, .cyber-font {
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 1px;
        }

        /* HUD Navigation */
        .hud-nav {
            background: rgba(11, 17, 32, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0, 243, 255, 0.3);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }

        /* Tab Styles */
        .nav-item {
            position: relative;
            transition: all 0.3s ease;
            clip-path: polygon(10% 0, 100% 0, 100% 100%, 0 100%, 0 40%);
        }
        
        .active-tab {
            background: rgba(0, 243, 255, 0.15);
            color: #00f3ff !important;
            border-bottom: 2px solid #00f3ff;
            text-shadow: 0 0 8px rgba(0, 243, 255, 0.8);
        }

        .active-mobile-tab {
            background: linear-gradient(90deg, rgba(0, 243, 255, 0.2) 0%, transparent 100%);
            color: #00f3ff;
            border-left: 4px solid #00f3ff;
            text-shadow: 0 0 5px #00f3ff;
        }

        /* Card Styles */
        .content-card {
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(0, 243, 255, 0.2);
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }
        .content-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 2px;
            background: linear-gradient(90deg, transparent, #00f3ff, transparent);
            opacity: 0.5;
        }
        .content-card::after {
            content: '';
            position: absolute;
            bottom: 0; right: 0; width: 20px; height: 20px;
            border-bottom: 2px solid #00f3ff;
            border-right: 2px solid #00f3ff;
        }

        /* Button Styles */
        .btn-primary {
            background: transparent;
            border: 1px solid #00f3ff;
            color: #00f3ff;
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.9rem;
        }
        .btn-primary:hover {
            background: #00f3ff;
            color: #0b1120;
            box-shadow: 0 0 15px #00f3ff;
        }

        .btn-secondary {
            background: transparent;
            border: 1px solid #ffb700;
            color: #ffb700;
            font-family: 'Orbitron', sans-serif;
            text-transform: uppercase;
            transition: all 0.3s;
        }
        .btn-secondary:hover {
            background: #ffb700;
            color: #0b1120;
            box-shadow: 0 0 15px #ffb700;
        }

        /* MathJax Override for Dark Mode */
        mjx-container { color: #e2e8f0 !important; }

        /* Animations */
        @keyframes scanline {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }
        .scan-effect::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(to bottom, transparent, rgba(0, 243, 255, 0.1), transparent);
            transform: translateY(-100%);
            animation: scanline 3s linear infinite;
            pointer-events: none;
        }

        .fade-enter { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); filter: blur(5px); }
            to { opacity: 1; transform: translateY(0); filter: blur(0); }
        }

        @keyframes pulse-glow {
            0%, 100% { filter: drop-shadow(0 0 2px #00f3ff); }
            50% { filter: drop-shadow(0 0 8px #00f3ff); }
        }
        .glow-effect { animation: pulse-glow 2s infinite; }
        
        .rub-anim { animation: rub 0.5s infinite; }
        @keyframes rub {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(10px, -5px) rotate(5deg); }
            75% { transform: translate(-10px, 5px) rotate(-5deg); }
        }
    </style>
</head>
<body class="flex flex-col min-h-screen selection:bg-neon-blue selection:text-black overflow-x-hidden">

    <!-- NAVIGATION HEADER -->
    <header class="hud-nav sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <!-- Logo Area -->
            <div class="flex items-center gap-3 cursor-pointer group" onclick="switchTab('intro')">
                <div class="w-10 h-10 border border-neon-blue flex items-center justify-center text-neon-blue shadow-neon group-hover:bg-neon-blue group-hover:text-black transition duration-300">
                    <i class="fas fa-atom text-xl animate-spin-slow" style="animation-duration: 10s"></i>
                </div>
                <div>
                    <h1 class="text-xl md:text-2xl font-bold text-white leading-none cyber-font uppercase tracking-widest">Lab <span class="text-neon-blue">Thầy Lâm</span></h1>
                    <div class="h-0.5 w-full bg-gradient-to-r from-neon-blue to-transparent mt-1"></div>
                </div>
            </div>

            <!-- Hamburger Button (Mobile) -->
            <button id="hamburger-button" class="lg:hidden text-neon-blue border border-neon-blue p-2 hover:bg-neon-blue hover:text-black transition">
                <i class="fas fa-bars text-xl"></i>
            </button>

            <!-- Desktop Tabs (HUD Style) -->
            <div class="hidden lg:flex gap-4">
                <button onclick="switchTab('intro')" id="tab-btn-desktop-intro" class="nav-item px-4 py-2 text-sm font-bold text-gray-400 hover:text-neon-blue tracking-wide">00. GIỚI THIỆU</button>
                <button onclick="switchTab('topic1')" id="tab-btn-desktop-topic1" class="nav-item px-4 py-2 text-sm font-bold text-gray-400 hover:text-neon-blue tracking-wide">01. NHIỄM ĐIỆN</button>
                <button onclick="switchTab('topic2')" id="tab-btn-desktop-topic2" class="nav-item px-4 py-2 text-sm font-bold text-gray-400 hover:text-neon-blue tracking-wide">02. DÒNG ĐIỆN</button>
                <button onclick="switchTab('topic3')" id="tab-btn-desktop-topic3" class="nav-item px-4 py-2 text-sm font-bold text-gray-400 hover:text-neon-blue tracking-wide">03. ĐO LƯỜNG</button>
                <button onclick="switchTab('quiz')" id="tab-btn-desktop-quiz" class="nav-item px-4 py-2 text-sm font-bold text-red-500 hover:text-red-400 border border-red-500/30 hover:border-red-500 tracking-wide ml-4">TEST SYSTEM</button>
            </div>
        </div>
    </header>

    <!-- MOBILE SIDEBAR MENU -->
    <div id="mobile-menu" class="fixed inset-y-0 right-0 w-80 bg-cyber-dark/95 backdrop-blur-xl border-l border-neon-blue transform translate-x-full transition-transform duration-300 z-[60] lg:hidden flex flex-col">
        <div class="p-6 border-b border-gray-800 flex justify-between items-center bg-gradient-to-r from-cyber-panel to-transparent">
            <span class="font-bold text-xl cyber-font text-neon-blue">SYSTEM MENU</span>
            <button id="close-menu-button" class="w-8 h-8 border border-red-500 text-red-500 hover:bg-red-500 hover:text-white transition flex items-center justify-center">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <nav class="flex-1 overflow-y-auto py-6 space-y-1">
            <button onclick="switchTab('intro')" id="tab-btn-mobile-intro" class="w-full text-left px-6 py-4 text-gray-400 hover:bg-gray-800/50 font-medium transition-colors border-b border-gray-800 flex items-center gap-3 font-tech text-lg">
                <span class="text-xs text-neon-blue">00</span> KHỞI ĐỘNG
            </button>
            <button onclick="switchTab('topic1')" id="tab-btn-mobile-topic1" class="w-full text-left px-6 py-4 text-gray-400 hover:bg-gray-800/50 font-medium transition-colors border-b border-gray-800 flex items-center gap-3 font-tech text-lg">
                <span class="text-xs text-neon-blue">01</span> NHIỄM ĐIỆN
            </button>
            <button onclick="switchTab('topic2')" id="tab-btn-mobile-topic2" class="w-full text-left px-6 py-4 text-gray-400 hover:bg-gray-800/50 font-medium transition-colors border-b border-gray-800 flex items-center gap-3 font-tech text-lg">
                <span class="text-xs text-neon-blue">02</span> MẠCH ĐIỆN
            </button>
            <button onclick="switchTab('topic3')" id="tab-btn-mobile-topic3" class="w-full text-left px-6 py-4 text-gray-400 hover:bg-gray-800/50 font-medium transition-colors border-b border-gray-800 flex items-center gap-3 font-tech text-lg">
                <span class="text-xs text-neon-blue">03</span> ĐO LƯỜNG
            </button>
            <button onclick="switchTab('quiz')" id="tab-btn-mobile-quiz" class="w-full text-left px-6 py-4 text-red-400 hover:bg-red-900/20 font-bold transition-colors border-b border-gray-800 flex items-center gap-3 mt-4 font-tech text-lg">
                <i class="fas fa-exclamation-triangle"></i> KIỂM TRA
            </button>
        </nav>
    </div>
    <!-- Overlay -->
    <div id="mobile-overlay" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden lg:hidden" onclick="closeMobileMenu()"></div>

    <!-- MAIN CONTENT AREA -->
    <main class="flex-grow container mx-auto px-4 py-8 lg:py-12 max-w-7xl">
        
        <!-- TAB: GIỚI THIỆU -->
        <div id="content-intro" class="tab-content hidden fade-enter">
            <div class="flex flex-col items-center text-center py-10">
                <div class="relative mb-6 group">
                    <div class="absolute -inset-1 bg-neon-blue rounded-full blur opacity-40 group-hover:opacity-75 transition duration-500 animate-pulse"></div>
                    <div class="w-40 h-40 relative bg-cyber-panel rounded-full flex items-center justify-center border-2 border-neon-blue shadow-neon">
                        <i class="fas fa-microchip text-7xl text-neon-blue"></i>
                    </div>
                </div>
                
                <h2 class="text-4xl md:text-6xl font-bold text-white mb-6 cyber-font tracking-wider">
                    XIN CHÀO <span class="text-transparent bg-clip-text bg-gradient-to-r from-neon-blue to-neon-purple">OPERATOR</span>
                </h2>
                
                <div class="content-card p-8 md:p-10 max-w-3xl mx-auto backdrop-blur-md">
                    <p class="text-xl md:text-2xl text-gray-300 leading-relaxed font-tech">
                        "Chào mừng đến với Trạm Không Gian Điện Học. <br>
                        Hôm nay, chúng ta sẽ giải mã các <span class="text-neon-blue font-bold">tín hiệu điện</span> vô hình. Hãy coi dòng điện như dòng chảy năng lượng trong con tàu vũ trụ này. Sẵn sàng kích hoạt hệ thống chưa?"
                    </p>
                    <div class="mt-4 text-right text-xs text-neon-blue font-mono">
                        // STATUS: ONLINE<br>
                        // SYSTEM: READY
                    </div>
                </div>

                <div class="mt-12">
                    <button onclick="switchTab('topic1')" class="btn-primary px-12 py-4 text-xl font-bold group">
                        <i class="fas fa-power-off mr-3"></i> KHỞI ĐỘNG MODULE 1
                    </button>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                <div class="content-card p-6 text-center hover:border-neon-purple transition duration-300 group">
                    <i class="fas fa-bolt text-4xl text-neon-purple mb-4 group-hover:scale-110 transition-transform"></i>
                    <h3 class="font-bold text-xl text-white mb-2 cyber-font">TĨNH ĐIỆN</h3>
                    <p class="text-gray-400 text-sm">Hiện tượng tích tụ điện tích bề mặt.</p>
                </div>
                <div class="content-card p-6 text-center hover:border-neon-blue transition duration-300 group">
                    <i class="fas fa-wave-square text-4xl text-neon-blue mb-4 group-hover:scale-110 transition-transform"></i>
                    <h3 class="font-bold text-xl text-white mb-2 cyber-font">DÒNG ĐIỆN</h3>
                    <p class="text-gray-400 text-sm">Sự dịch chuyển có hướng của các hạt tải điện.</p>
                </div>
                <div class="content-card p-6 text-center hover:border-warning transition duration-300 group">
                    <i class="fas fa-tachometer-alt text-4xl text-warning mb-4 group-hover:scale-110 transition-transform"></i>
                    <h3 class="font-bold text-xl text-white mb-2 cyber-font">ĐO LƯỜNG</h3>
                    <p class="text-gray-400 text-sm">Phân tích thông số Ampe và Volt.</p>
                </div>
            </div>
        </div>

        <!-- TAB 1: NHIỄM ĐIỆN -->
        <div id="content-topic1" class="tab-content hidden fade-enter">
            <div class="flex items-center gap-4 mb-8 border-b border-gray-800 pb-4">
                <div class="px-3 py-1 bg-neon-purple/20 border border-neon-purple text-neon-purple text-xs font-bold cyber-font rounded">MODULE 01</div>
                <h2 class="text-3xl font-bold text-white cyber-font">NHIỄM ĐIỆN DO CỌ XÁT</h2>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                <!-- Theory -->
                <div class="lg:col-span-5 space-y-6">
                    <div class="content-card p-6 border-l-4 border-l-neon-purple">
                        <h3 class="font-bold text-lg text-neon-purple mb-3 cyber-font">
                            <i class="fas fa-terminal mr-2"></i>DATA LOG:
                        </h3>
                        <p class="text-gray-300 font-tech text-lg">
                            "Mọi vật chất đều chứa các hạt mang điện. Khi cọ xát, chúng ta cưỡng bức các Electron di chuyển từ vật này sang vật khác, phá vỡ trạng thái cân bằng năng lượng."
                        </p>
                    </div>

                    <div class="space-y-4 font-tech text-lg">
                        <div class="bg-gray-800/50 p-4 rounded border border-gray-700">
                            <i class="fas fa-check text-neon-green mr-2"></i> Vật nhiễm điện có khả năng <strong class="text-white">hút vật khác</strong>.
                        </div>
                        <div class="bg-gray-800/50 p-4 rounded border border-gray-700">
                            <i class="fas fa-plus text-red-500 mr-2"></i> Điện tích Dương (+): <span class="text-gray-400">Mất bớt electron.</span>
                        </div>
                        <div class="bg-gray-800/50 p-4 rounded border border-gray-700">
                            <i class="fas fa-minus text-blue-500 mr-2"></i> Điện tích Âm (-): <span class="text-gray-400">Nhận thêm electron.</span>
                        </div>
                    </div>
                </div>

                <!-- Simulation -->
                <div class="lg:col-span-7">
                    <div class="content-card min-h-[450px] flex flex-col scan-effect">
                        <div class="bg-gray-900/80 p-3 flex justify-between items-center border-b border-gray-700">
                            <span class="text-xs font-mono text-neon-blue"><i class="fas fa-flask"></i> SIMULATION_VIEW_V1.0</span>
                            <div class="flex gap-1">
                                <div class="w-2 h-2 rounded-full bg-red-500 animate-pulse"></div>
                                <div class="w-2 h-2 rounded-full bg-gray-600"></div>
                            </div>
                        </div>
                        
                        <div class="flex-grow flex flex-col items-center justify-center relative p-6 bg-cyber-dark">
                            <!-- Grid Background for Sim -->
                            <div class="absolute inset-0 opacity-20" style="background-image: radial-gradient(#334155 1px, transparent 1px); background-size: 20px 20px;"></div>

                            <svg width="100%" height="250" viewBox="0 0 300 200" class="overflow-visible relative z-10">
                                <defs>
                                    <filter id="neon-glow" x="-50%" y="-50%" width="200%" height="200%">
                                        <feGaussianBlur stdDeviation="2.5" result="coloredBlur"/>
                                        <feMerge>
                                            <feMergeNode in="coloredBlur"/>
                                            <feMergeNode in="SourceGraphic"/>
                                        </feMerge>
                                    </filter>
                                </defs>

                                <!-- Silk Cloth -->
                                <g id="silk-cloth" transform="translate(50, 80)">
                                    <path d="M0,10 Q50,-10 100,10 L100,70 Q50,90 0,70 Z" fill="none" stroke="#bc13fe" stroke-width="2" fill-opacity="0.2" fill="#bc13fe" />
                                    <text x="50" y="50" text-anchor="middle" fill="#bc13fe" font-size="10" font-family="monospace">MATERIAL: SILK</text>
                                    <g id="silk-charges" opacity="0" class="transition-opacity duration-500">
                                        <circle cx="20" cy="30" r="6" fill="none" stroke="#bc13fe"/>
                                        <text x="20" y="33" text-anchor="middle" fill="#bc13fe" font-size="10" font-weight="bold">-</text>
                                        <circle cx="50" cy="30" r="6" fill="none" stroke="#bc13fe"/>
                                        <text x="50" y="33" text-anchor="middle" fill="#bc13fe" font-size="10" font-weight="bold">-</text>
                                        <circle cx="80" cy="30" r="6" fill="none" stroke="#bc13fe"/>
                                        <text x="80" y="33" text-anchor="middle" fill="#bc13fe" font-size="10" font-weight="bold">-</text>
                                    </g>
                                </g>

                                <!-- Glass Rod -->
                                <g id="glass-rod" transform="translate(160, 40)">
                                    <rect x="0" y="0" width="30" height="140" fill="rgba(0, 243, 255, 0.1)" stroke="#00f3ff" stroke-width="2" rx="4" transform="rotate(-15, 15, 70)" />
                                    <g id="rod-charges" opacity="0" class="transition-opacity duration-500">
                                        <text x="35" y="40" fill="#00f3ff" font-weight="bold" font-size="14" style="filter: url(#neon-glow)">+</text>
                                        <text x="40" y="70" fill="#00f3ff" font-weight="bold" font-size="14" style="filter: url(#neon-glow)">+</text>
                                        <text x="45" y="100" fill="#00f3ff" font-weight="bold" font-size="14" style="filter: url(#neon-glow)">+</text>
                                    </g>
                                </g>
                            </svg>

                            <p id="rub-status" class="text-neon-green font-mono text-sm h-6 mb-4 text-center"></p>

                            <div class="flex gap-4">
                                <button id="btn-rub" class="btn-primary px-6 py-2 text-xs">
                                    <i class="fas fa-hand-sparkles mr-2"></i> EXECUTE RUB_SEQUENCE
                                </button>
                                <button id="btn-reset-rub" class="px-4 py-2 border border-gray-600 text-gray-400 hover:text-white hover:border-white transition text-xs font-mono uppercase">
                                    RESET
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB 2: DÒNG ĐIỆN -->
        <div id="content-topic2" class="tab-content hidden fade-enter">
            <div class="flex items-center gap-4 mb-8 border-b border-gray-800 pb-4">
                <div class="px-3 py-1 bg-neon-blue/20 border border-neon-blue text-neon-blue text-xs font-bold cyber-font rounded">MODULE 02</div>
                <h2 class="text-3xl font-bold text-white cyber-font">DÒNG ĐIỆN & NGUỒN</h2>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                <!-- Theory -->
                <div class="lg:col-span-5 space-y-6">
                     <div class="content-card p-6 border-l-4 border-l-neon-blue">
                        <h3 class="font-bold text-lg text-neon-blue mb-3 cyber-font">
                            <i class="fas fa-info-circle mr-2"></i>CONCEPT:
                        </h3>
                        <p class="text-gray-300 font-tech text-lg">
                            "Hãy hình dung một con sông năng lượng. Nguồn điện chính là máy bơm đẩy các hạt năng lượng đi qua mạch kín để kích hoạt các thiết bị."
                        </p>
                    </div>

                    <div class="bg-gray-900/50 p-4 border border-gray-700 rounded font-tech">
                        <div class="mb-3">
                            <span class="text-neon-blue font-bold uppercase block text-sm">Dòng điện (I):</span>
                            <span class="text-gray-400 text-sm">Chiều quy ước từ cực Dương (+) sang cực Âm (-).</span>
                        </div>
                        <div class="h-px bg-gray-700 my-2"></div>
                        <div>
                            <span class="text-neon-purple font-bold uppercase block text-sm">Electron (e-):</span>
                            <span class="text-gray-400 text-sm">Di chuyển ngược chiều điện trường: Từ Âm (-) sang Dương (+).</span>
                        </div>
                    </div>
                </div>

                <!-- Sim -->
                <div class="lg:col-span-7">
                    <div class="content-card min-h-[450px] flex flex-col scan-effect">
                        <div class="bg-gray-900/80 p-3 flex justify-between items-center border-b border-gray-700">
                            <span class="text-xs font-mono text-neon-blue"><i class="fas fa-project-diagram"></i> CIRCUIT_DIAGRAM_V2.0</span>
                        </div>
                        
                        <div class="flex-grow flex flex-col items-center justify-center relative p-6 bg-cyber-dark">
                            <svg width="100%" height="250" viewBox="0 0 340 220" class="overflow-visible z-10">
                                <defs>
                                    <marker id="arrow-neon" markerWidth="6" markerHeight="6" refX="3" refY="3" orient="auto">
                                        <path d="M0,0 L6,3 L0,6 z" fill="#ffb700" />
                                    </marker>
                                </defs>

                                <!-- Wire -->
                                <path d="M50 170 L50 50 L290 50 L290 170" stroke="#334155" stroke-width="2" fill="none"/>
                                <line x1="100" y1="170" x2="240" y2="170" stroke="#334155" stroke-width="2"/>

                                <!-- Battery -->
                                <g transform="translate(145, 155)">
                                    <rect x="-25" y="-30" width="70" height="60" fill="#0f172a" stroke="#475569" rx="2"/>
                                    <text x="-15" y="10" font-weight="bold" fill="#3b82f6" font-family="monospace">-</text>
                                    <text x="35" y="10" font-weight="bold" fill="#ef4444" font-family="monospace">+</text>
                                    <line x1="0" y1="-15" x2="0" y2="25" stroke="#3b82f6" stroke-width="3" />
                                    <line x1="25" y1="-20" x2="25" y2="30" stroke="#ef4444" stroke-width="3" />
                                </g>

                                <!-- Bulb -->
                                <g id="bulb" transform="translate(170, 50)">
                                    <circle cx="0" cy="0" r="18" fill="#1e293b" stroke="#94a3b8" stroke-width="2" />
                                    <path d="M-8 8 L-4 -5 L4 -5 L8 8" stroke="#cbd5e1" fill="none" />
                                    <circle id="bulb-glow" cx="0" cy="0" r="30" fill="url(#bulbGrad)" opacity="0" />
                                    <defs>
                                        <radialGradient id="bulbGrad">
                                            <stop offset="0%" stop-color="#ffb700" stop-opacity="0.8"/>
                                            <stop offset="100%" stop-color="transparent"/>
                                        </radialGradient>
                                    </defs>
                                </g>

                                <!-- Switch -->
                                <g id="switch-group" transform="translate(290, 110)">
                                    <circle cx="0" cy="-15" r="4" fill="#64748b" />
                                    <circle cx="0" cy="15" r="4" fill="#64748b" />
                                    <line id="switch-arm" x1="0" y1="15" x2="-25" y2="-15" stroke="#00f3ff" stroke-width="3" style="transition: all 0.3s; transform-origin: 0 15px;" />
                                </g>

                                <!-- Current (Yellow) -->
                                <g id="current-arrows" opacity="0" class="transition-opacity duration-500">
                                    <path d="M220 50 L120 50" stroke="#ffb700" stroke-width="1.5" marker-end="url(#arrow-neon)" stroke-dasharray="4,4" />
                                    <path d="M50 100 L50 140" stroke="#ffb700" stroke-width="1.5" marker-end="url(#arrow-neon)" stroke-dasharray="4,4" />
                                    <path d="M290 140 L290 100" stroke="#ffb700" stroke-width="1.5" marker-end="url(#arrow-neon)" stroke-dasharray="4,4" />
                                </g>

                                <!-- Electrons (Blue dots) -->
                                <g id="electron-group" opacity="0" class="transition-opacity duration-500">
                                    <circle class="electron" r="3" fill="#00f3ff">
                                        <animateMotion dur="2s" repeatCount="indefinite" path="M145 170 L50 170 L50 50 L290 50 L290 170 L165 170" />
                                    </circle>
                                    <circle class="electron" r="3" fill="#00f3ff">
                                        <animateMotion dur="2s" begin="0.6s" repeatCount="indefinite" path="M145 170 L50 170 L50 50 L290 50 L290 170 L165 170" />
                                    </circle>
                                    <circle class="electron" r="3" fill="#00f3ff">
                                        <animateMotion dur="2s" begin="1.2s" repeatCount="indefinite" path="M145 170 L50 170 L50 50 L290 50 L290 170 L165 170" />
                                    </circle>
                                </g>
                            </svg>

                            <div class="mt-6 w-full flex justify-center">
                                <button id="btn-toggle-switch" class="btn-primary w-56 py-3 font-bold flex items-center justify-center gap-2">
                                    <i class="fas fa-toggle-off"></i> <span>ACTIVATE SWITCH</span>
                                </button>
                            </div>
                            
                            <div class="mt-4 flex gap-6 text-[10px] font-mono uppercase tracking-widest text-gray-500">
                                <div class="flex items-center gap-2"><div class="w-2 h-2 rounded-full bg-[#ffb700]"></div> Current Flow</div>
                                <div class="flex items-center gap-2"><div class="w-2 h-2 rounded-full bg-[#00f3ff]"></div> Electron Flow</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB 3: ĐO LƯỜNG -->
        <div id="content-topic3" class="tab-content hidden fade-enter">
            <div class="flex items-center gap-4 mb-8 border-b border-gray-800 pb-4">
                <div class="px-3 py-1 bg-warning/20 border border-warning text-warning text-xs font-bold cyber-font rounded">MODULE 03</div>
                <h2 class="text-3xl font-bold text-white cyber-font">CÔNG CỤ ĐO LƯỜNG</h2>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                <!-- Theory -->
                <div class="lg:col-span-5 space-y-6">
                     <div class="content-card p-6 border-l-4 border-l-warning">
                        <h3 class="font-bold text-lg text-warning mb-3 cyber-font">
                            <i class="fas fa-ruler-combined mr-2"></i>ANALOGY:
                        </h3>
                        <p class="text-gray-300 font-tech text-lg">
                            "Ampe kế là bộ đếm lưu lượng (số hạt qua cổng). Volt kế là máy đo áp suất (chênh lệch năng lượng)."
                        </p>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-gray-800 p-4 border border-gray-600 rounded hover:border-neon-green transition">
                            <h4 class="font-bold text-neon-green text-lg cyber-font">AMPE KẾ (A)</h4>
                            <div class="text-xs text-gray-400 mt-2 font-mono">
                                <p>> ĐO: DÒNG ĐIỆN (I)</p>
                                <p>> ĐƠN VỊ: AMPE</p>
                                <p class="text-neon-green mt-1">[ NỐI TIẾP ]</p>
                            </div>
                        </div>
                        <div class="bg-gray-800 p-4 border border-gray-600 rounded hover:border-neon-blue transition">
                            <h4 class="font-bold text-neon-blue text-lg cyber-font">VOLT KẾ (V)</h4>
                            <div class="text-xs text-gray-400 mt-2 font-mono">
                                <p>> ĐO: HIỆU ĐIỆN THẾ (U)</p>
                                <p>> ĐƠN VỊ: VOLT</p>
                                <p class="text-neon-blue mt-1">[ SONG SONG ]</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sim -->
                <div class="lg:col-span-7">
                    <div class="content-card min-h-[450px] flex flex-col scan-effect">
                        <div class="bg-gray-900/80 p-3 flex justify-between items-center border-b border-gray-700">
                            <span class="text-xs font-mono text-neon-blue"><i class="fas fa-tachometer-alt"></i> METER_CALIBRATION</span>
                        </div>
                        
                        <div class="flex-grow flex flex-col items-center justify-center relative p-6 bg-cyber-dark">
                            <svg width="100%" height="250" viewBox="0 0 340 220" class="overflow-visible z-10">
                                <!-- Circuit -->
                                <rect x="40" y="40" width="260" height="140" fill="none" stroke="#475569" stroke-width="2" rx="4" />
                                
                                <!-- Battery -->
                                <g transform="translate(170, 180)">
                                    <rect x="-20" y="-15" width="40" height="30" fill="#0f172a" stroke="#475569"/>
                                    <text x="-15" y="5" fill="white" font-size="10">-</text>
                                    <text x="10" y="5" fill="white" font-size="10">+</text>
                                </g>

                                <!-- Bulb -->
                                <g transform="translate(170, 40)">
                                    <circle cx="0" cy="0" r="15" fill="#1e293b" stroke="#94a3b8" />
                                    <circle id="meter-bulb-glow" cx="0" cy="0" r="25" fill="#ffb700" opacity="0" style="filter: blur(8px)" />
                                </g>

                                <!-- Ammeter -->
                                <g transform="translate(40, 110)">
                                    <circle cx="0" cy="0" r="20" fill="#0f172a" stroke="#0aff00" stroke-width="2" />
                                    <text x="0" y="5" text-anchor="middle" font-bold="true" fill="#0aff00" font-family="monospace">A</text>
                                    <line id="needle-a" x1="0" y1="12" x2="0" y2="-15" stroke="#ef4444" stroke-width="2" transform="rotate(-45, 0, 12)" style="transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);" />
                                </g>

                                <!-- Voltmeter -->
                                <path d="M150 40 L150 80 L190 80 L190 40" fill="none" stroke="#3b82f6" stroke-width="1" stroke-dasharray="2,2" />
                                <g transform="translate(170, 80)">
                                    <circle cx="0" cy="0" r="20" fill="#0f172a" stroke="#3b82f6" stroke-width="2" />
                                    <text x="0" y="5" text-anchor="middle" font-bold="true" fill="#3b82f6" font-family="monospace">V</text>
                                    <line id="needle-v" x1="0" y1="12" x2="0" y2="-15" stroke="#ef4444" stroke-width="2" transform="rotate(-45, 0, 12)" style="transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);" />
                                </g>
                            </svg>

                            <div class="mt-4 w-full px-8">
                                <label class="block text-center text-xs font-mono text-neon-blue mb-2 tracking-widest">[ INPUT VOLTAGE CONTROL ]</label>
                                <input type="range" id="voltage-slider" min="0" max="3" step="1" value="0" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-blue">
                                <div class="flex justify-between w-full text-[10px] font-mono text-gray-500 mt-2">
                                    <span>OFF</span>
                                    <span>LOW</span>
                                    <span>MED</span>
                                    <span>MAX</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB: KIỂM TRA -->
        <div id="content-quiz" class="tab-content hidden h-full fade-enter">
            <div class="flex items-center gap-4 mb-6 border-b border-red-900/50 pb-4">
                <div class="w-10 h-10 border border-red-500 flex items-center justify-center text-red-500 shadow-[0_0_10px_rgba(239,68,68,0.5)]">
                    <i class="fas fa-tasks"></i>
                </div>
                <h2 class="text-3xl font-bold text-white cyber-font">FINAL ASSESSMENT</h2>
            </div>
            
            <div class="w-full h-[800px] border border-gray-700 bg-black relative overflow-hidden">
                 <div class="absolute inset-0 border-[1px] border-red-500/20 pointer-events-none z-10"></div>
                 <div class="absolute top-0 right-0 p-2 text-xs font-mono text-red-500 z-20 animate-pulse">REC ●</div>
                 <iframe src="test.html" title="Bài kiểm tra Vật Lý 8" class="w-full h-full z-0 opacity-90">
                     <p>System Error: Iframe not supported.</p>
                 </iframe>
            </div>
        </div>

    </main>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- 1. NAVIGATION & UI LOGIC ---

        const tabs = ['intro', 'topic1', 'topic2', 'topic3', 'quiz'];
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileOverlay = document.getElementById('mobile-overlay');
        const hamburgerBtn = document.getElementById('hamburger-button');
        const closeMenuBtn = document.getElementById('close-menu-button');

        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(el => {
                el.classList.add('hidden');
            });
            
            const selectedContent = document.getElementById(`content-${tabId}`);
            selectedContent.classList.remove('hidden');
            selectedContent.classList.remove('fade-enter');
            void selectedContent.offsetWidth; 
            selectedContent.classList.add('fade-enter');

            tabs.forEach(t => {
                // Desktop
                const dBtn = document.getElementById(`tab-btn-desktop-${t}`);
                if(dBtn) {
                    dBtn.classList.remove('active-tab', 'text-neon-blue');
                    dBtn.classList.add('text-gray-400');
                    if(t === 'quiz') dBtn.classList.remove('text-red-400', 'border-red-500');
                }

                // Mobile
                const mBtn = document.getElementById(`tab-btn-mobile-${t}`);
                if(mBtn) {
                    mBtn.classList.remove('active-mobile-tab');
                    mBtn.classList.add('text-gray-400');
                }
            });

            // Activate Desktop
            const activeDesktop = document.getElementById(`tab-btn-desktop-${tabId}`);
            if(activeDesktop) {
                activeDesktop.classList.add('active-tab');
                activeDesktop.classList.remove('text-gray-400');
            }

            // Activate Mobile
            const activeMobile = document.getElementById(`tab-btn-mobile-${tabId}`);
            if(activeMobile) {
                activeMobile.classList.add('active-mobile-tab');
                activeMobile.classList.remove('text-gray-400');
            }

            closeMobileMenu();

            if (window.MathJax && typeof MathJax.typesetPromise === 'function') {
                MathJax.typesetPromise();
            }
        }

        function openMobileMenu() {
            mobileMenu.classList.remove('translate-x-full');
            mobileOverlay.classList.remove('hidden');
        }

        function closeMobileMenu() {
            mobileMenu.classList.add('translate-x-full');
            mobileOverlay.classList.add('hidden');
        }

        hamburgerBtn.addEventListener('click', openMobileMenu);
        closeMenuBtn.addEventListener('click', closeMobileMenu);

        switchTab('intro');


        // --- 2. SIMULATION LOGIC ---

        // SIM 1: Friction
        const btnRub = document.getElementById('btn-rub');
        const btnResetRub = document.getElementById('btn-reset-rub');
        const glassRod = document.getElementById('glass-rod');
        const rodCharges = document.getElementById('rod-charges');
        const silkCharges = document.getElementById('silk-charges');
        const rubStatus = document.getElementById('rub-status');

        if(btnRub) {
            btnRub.addEventListener('click', () => {
                rubStatus.innerText = ">> EXECUTING FRICTION SEQUENCE...";
                glassRod.classList.add('rub-anim');
                btnRub.disabled = true;
                btnRub.classList.add('opacity-50', 'cursor-not-allowed');
                
                setTimeout(() => {
                    glassRod.classList.remove('rub-anim');
                    rodCharges.style.opacity = '1';
                    silkCharges.style.opacity = '1';
                    rubStatus.innerText = ">> STATUS: CHARGE TRANSFER COMPLETE [ + ]";
                    rubStatus.classList.add('text-neon-blue');
                    btnRub.disabled = false;
                    btnRub.classList.remove('opacity-50', 'cursor-not-allowed');
                }, 2000);
            });

            btnResetRub.addEventListener('click', () => {
                rodCharges.style.opacity = '0';
                silkCharges.style.opacity = '0';
                glassRod.classList.remove('rub-anim');
                rubStatus.innerText = "";
            });
        }


        // SIM 2: Circuit
        const btnSwitch = document.getElementById('btn-toggle-switch');
        const switchArm = document.getElementById('switch-arm');
        const electronGroup = document.getElementById('electron-group');
        const currentArrows = document.getElementById('current-arrows');
        const bulbGlow = document.getElementById('bulb-glow');
        let isSwitchClosed = false;

        if(btnSwitch) {
            btnSwitch.addEventListener('click', () => {
                isSwitchClosed = !isSwitchClosed;
                
                if (isSwitchClosed) {
                    switchArm.setAttribute('x2', '-25');
                    switchArm.setAttribute('y2', '0'); 
                    switchArm.style.transform = "rotate(-25deg)"; 

                    btnSwitch.innerHTML = "<i class='fas fa-power-off'></i> <span>DEACTIVATE</span>";
                    btnSwitch.classList.add('border-red-500', 'text-red-500');
                    btnSwitch.classList.remove('border-neon-blue', 'text-neon-blue');
                    
                    electronGroup.style.opacity = '1';
                    currentArrows.style.opacity = '1';
                    bulbGlow.style.opacity = '1';
                } else {
                    switchArm.style.transform = "rotate(0deg)";

                    btnSwitch.innerHTML = "<i class='fas fa-power-off'></i> <span>ACTIVATE SWITCH</span>";
                    btnSwitch.classList.remove('border-red-500', 'text-red-500');
                    btnSwitch.classList.add('border-neon-blue', 'text-neon-blue');

                    electronGroup.style.opacity = '0';
                    currentArrows.style.opacity = '0';
                    bulbGlow.style.opacity = '0';
                }
            });
        }


        // SIM 3: Meters
        const voltageSlider = document.getElementById('voltage-slider');
        const needleA = document.getElementById('needle-a');
        const needleV = document.getElementById('needle-v');
        const meterBulbGlow = document.getElementById('meter-bulb-glow');

        if(voltageSlider) {
            voltageSlider.addEventListener('input', (e) => {
                const val = parseInt(e.target.value);
                const angle = -45 + (val * 30); 
                
                if(needleA) needleA.style.transform = `rotate(${angle}deg)`;
                if(needleV) needleV.style.transform = `rotate(${angle}deg)`;
                if(meterBulbGlow) meterBulbGlow.style.opacity = val * 0.3; 
            });
        }

    </script>
</body>
</html>
